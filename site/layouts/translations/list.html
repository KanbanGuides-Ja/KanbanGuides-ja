{{- define "main" }}
  {{- $guidePage := .Site.GetPage (printf "/%s/guide" .Site.Language.Lang) | default (.Site.GetPage "/guide") }}

  {{- $now := now }}
  {{- $translations := .Site.Data.translations }}
  {{- $translation := index $translations .Site.Language.Lang | default (index $translations "en") }}

  {{- $isComingSoon := and $guidePage $guidePage.Date (lt now $guidePage.Date) (eq hugo.Environment "production") }}
  <section class="container my-5">
    <div class="row">
      <div class="col-12">
        <h1 class="mb-4">{{ i18n "download_page_title" $guidePage }}</h1>

        <p class="lead mb-4">
          {{ i18n "download_page_description" $guidePage }}

          {{ i18n "download_page_originators" $guidePage }}
        </p>

        <p class="mb-4">{{ i18n "download_translations_provided" . }}</p>

        <p class="mb-5">{{ i18n "download_translation_error" $guidePage }} <a href="mailto:{{ .Site.Params.supportEmail }}">{{ .Site.Params.supportEmail }}</a></p>

        <!-- Official Version -->
        {{ partial "components/translations/official-version.html" . }}

        {{ partial "components/translations/community-translations.html" . }}

        {{ partial "components/translations/preview-translations.html" . }}
      </div>
    </div>
  </section>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // Add event listeners to all PDF download links
      document.querySelectorAll(".pdf-download").forEach(function (link) {
        link.addEventListener("click", function (e) {
          // Get data attributes
          const language = this.dataset.language;
          const languageCode = this.dataset.languageCode;
          const type = this.dataset.type;
          const filename = this.dataset.filename;

          // Track the download event
          if (typeof gtag !== "undefined") {
            gtag("event", "download", {
              event_category: "PDF",
              event_label: language + " - " + type,
              file_name: filename,
              file_extension: "pdf",
              language_code: languageCode,
            });
          }
        });
      });
    });
  </script>
{{- end }}
{{- define "template" }}
  download/list.html
{{- end }}
